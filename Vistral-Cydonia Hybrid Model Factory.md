# Vistral-Cydonia Hybrid Model Factory

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä (pipeline) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–∏–±—Ä–∏–¥–Ω–æ–π Large Language Model, –æ–±—ä–µ–¥–∏–Ω—è—é—â–µ–π —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –¥–≤—É—Ö –º–æ–¥–µ–ª–µ–π:

*   **`Vikhrmodels/Vistral-24B-Instruct`**: –ì–ª—É–±–æ–∫–æ–µ –∑–Ω–∞–Ω–∏–µ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞.
*   **`TheDrummer/Cydonia-24B-v4.2.0`**: –ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫ Role-Playing (RP) –∏ —Å–ª–µ–¥–æ–≤–∞–Ω–∏—é —Å–ª–æ–∂–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º.

–ü—Ä–æ—Ü–µ—Å—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç State-of-the-Art (SOTA) —Ç–µ—Ö–Ω–∏–∫–∏ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –Ω–∞–∏–ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

## –§–∏–ª–æ—Å–æ—Ñ–∏—è –ø–æ–¥—Ö–æ–¥–∞ (3 –§–∞–∑—ã)

1.  **–§–∞–∑–∞ 1: –ì–∏–±—Ä–∏–¥–Ω–æ–µ —Å–ª–∏—è–Ω–∏–µ (`DARE TIES`)**. –ú—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–º–µ—à–∏–≤–∞–µ–º –º–æ–¥–µ–ª–∏. –ú—ã –≤—ã—á–∏—Å–ª—è–µ–º "—É–º–µ–Ω–∏—è" –∫–∞–∂–¥–æ–π –∏–∑ –Ω–∏—Ö (—Ä–∞–∑–Ω–∏—Ü—É —Å –æ–±—â–µ–π –±–∞–∑–æ–≤–æ–π –º–æ–¥–µ–ª—å—é) –∏ —Å–∫–ª–∞–¥—ã–≤–∞–µ–º –∏—Ö. –î–ª—è –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö —Å–ª–æ–µ–≤ —Å–ª–æ–≤–∞—Ä—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è "—Ö–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–∏–π" –º–µ—Ç–æ–¥ `SLERP`.
2.  **–§–∞–∑–∞ 2: "–ü–æ–ª–∏—Ä–æ–≤–∫–∞" (`LoRA` + `CAME`)**. –ü–æ—Å–ª–µ —Å–ª–∏—è–Ω–∏—è –º–æ–¥–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ ("—à–≤—ã"). –ú—ã –ø—Ä–æ–≤–æ–¥–∏–º –∫–æ—Ä–æ—Ç–∫–æ–µ –¥–æ–æ–±—É—á–µ–Ω–∏–µ (1 —ç–ø–æ—Ö–∞) –Ω–∞ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ `GrandMaster2` —Å –ø–æ–º–æ—â—å—é LoRA. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä `CAME`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –æ—à–∏–±–∫–∏, –Ω–µ —Ä–∞–∑—Ä—É—à–∞—è —É–∂–µ –∏–º–µ—é—â–∏–µ—Å—è –∑–Ω–∞–Ω–∏—è.
3.  **–§–∞–∑–∞ 3: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è**. –ú—ã "–≤–ø–µ–∫–∞–µ–º" LoRA-–∞–¥–∞–ø—Ç–µ—Ä –≤ –º–æ–¥–µ–ª—å, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –µ–¥–∏–Ω—ã–π, –≥–æ—Ç–æ–≤—ã–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ñ–∞–π–ª.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

*   –ê–∫–∫–∞—É–Ω—Ç [RunPod](https://runpod.io).
*   –ê–∫–∫–∞—É–Ω—Ç [Hugging Face](https://huggingface.co).
*   –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ Hugging Face —Å –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ **–∑–∞–ø–∏—Å—å (`write`)**.
*   **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ü–æ–¥:** GPU `NVIDIA RTX A6000 (48 GB VRAM)` –∏–ª–∏ –º–æ—â–Ω–µ–µ.
*   **–î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ:** **250 GB** –∏–ª–∏ –±–æ–ª—å—à–µ.

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ü–æ–¥** –Ω–∞ RunPod —Å —à–∞–±–ª–æ–Ω–æ–º `RunPod Pytorch 2.2.1` (–∏–ª–∏ –Ω–æ–≤–µ–µ).

2.  **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Ç–µ—Ä–º–∏–Ω–∞–ª—É** –∏ –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
    ```bash
    git clone https://github.com/YourUsername/YourRepoName.git
    cd YourRepoName
    ```

3.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** —Å –ø–æ–º–æ—â—å—é —Å–∫—Ä–∏–ø—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
    ```bash
    chmod +x setup.sh
    ./setup.sh
    ```

4.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.** **–ù–µ –≤–ø–∏—Å—ã–≤–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –ø—Ä—è–º–æ –≤ —Å–∫—Ä–∏–ø—Ç!**
    ```bash
    export HF_USERNAME="–≤–∞—à-–ª–æ–≥–∏–Ω-–Ω–∞-hf"
    export HF_TOKEN="hf_–í–ê–®_–¢–û–ö–ï–ù_–°_–ü–†–ê–í–ê–ú–ò_–ó–ê–ü–ò–°–ò"
    export NEW_MODEL_NAME="Vistral-Cydonia-Final-24B" # –ò–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ –∏–º—è –¥–ª—è –≤–∞—à–µ–π –º–æ–¥–µ–ª–∏
    ```

5.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω–≤–µ–π–µ—Ä –ø–æ—Ñ–∞–∑–æ–≤–æ.** –ö–∞–∂–¥—ã–π —Å–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π —à–∞–≥ –∏ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ.

    > üí° **–ù–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥:** –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ —Å –≥–ª—É–±–∏–Ω–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã–º–∏ –≤–µ—Å–∞–º–∏ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç `scripts/run_dare_linear_profiled.sh`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥ `configs/dare_linear_profiled.yml` –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç DARE-Linear —Å "–ø—Ä–æ—Ñ–∏–ª–µ–º" –ø–æ —Å–ª–æ—è–º. –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–æ–¥–µ–ª–∏ –∏ —Å–æ–∑–¥–∞—Å—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å–ª–∏—è–Ω–∏—è –≤ `/workspace/merged_dare_linear_profiled`.

    **–§–∞–∑–∞ 1: –°–ª–∏—è–Ω–∏–µ –º–æ–¥–µ–ª–µ–π**
    ```bash
    chmod +x scripts/01_run_merge.sh
    ./scripts/01_run_merge.sh
    ```
    *(...–∏–¥–∏—Ç–µ –ø–∏—Ç—å —á–∞–π, —ç—Ç–æ –Ω–∞–¥–æ–ª–≥–æ...)*

    **–§–∞–∑–∞ 2: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ LoRA**
    ```bash
    chmod +x scripts/02_run_finetune.sh
    ./scripts/02_run_finetune.sh
    ```
    *(...–µ—â–µ –æ–¥–∏–Ω —á–∞–π...)*

    **–§–∞–∑–∞ 3: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∞**
    ```bash
    chmod +x scripts/03_run_finalize.sh
    ./scripts/03_run_finalize.sh
    ```

6.  **–ì–æ—Ç–æ–≤–æ!** –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞, –≤–∞—à–∞ –Ω–æ–≤–∞—è –º–æ–¥–µ–ª—å –±—É–¥–µ—Ç –≤ –≤–∞—à–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞ Hugging Face.

7.  **!!! –ù–ï –ó–ê–ë–£–î–¨–¢–ï –û–°–¢–ê–ù–û–í–ò–¢–¨ –ü–û–î –ù–ê RUNPOD !!!**